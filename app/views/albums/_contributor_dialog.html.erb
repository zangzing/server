<div class= "request_access" id="social-like-dialog">
  <div id="ld-inner">
    <%= form_for 'album', :url => request_album_access_url(album_id),  :html => { :method => :post, :id => "request_access_form" } do |f | %>
    <div id="ld-top">
      You have not been invited to contribute photos into this album yet.
      Send a message to the owner for an invitation.( Your name and email will be included )
    </div>
    <div id="ld-middle">
      <textarea id="request_access_message" name="message"></textarea>
    </div>
    <a id="ld-cancel" class="newblack-button" href="javascript:void(0)"><span>No thanks</span></a>
    <a id="ld-ok" class="newgreen-button" href="javascript:void(0)"><span>Send</span></a>
    <%end%>
  </div>
</div>

<script type="text/javascript">
                     $('#social-like-dialog').zz_dialog({ autoOpen: false });
                     $('#ld-cancel').click( function(){
                         $('#social-like-dialog').zz_dialog('close');
                         $('#social-like-dialog').zz_dialog().empty().remove();
                     });
                     $('#ld-ok').click( function(){
                         var message =  $('#request_access_message').val();
                         $('#social-like-dialog').zz_dialog('close');
                         $('#social-like-dialog').zz_dialog().empty().remove();
                         var dialog = zz.dialog.show_progress_dialog('Requesting Invitation...');
                         zz.routes.albums.request_contributor( '<%=album_id%>',
                                                          message,
                                                          function(){
                                                              dialog.close();
                                                              zz.dialog.show_flash_dialog('Your message has been sent. You will receive an email when you are invited');
                                                          },
                                                          function(){
                                                              dialog.close();
                                                              zz.dialog.show_flash_dialog('Unable to send the message at the moment. Please try again later...')
                                                          })
                     });
                     $('#social-like-dialog').zz_dialog('open');
</script>