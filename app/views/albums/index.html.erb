<% content_for :page_title do %><%= @user.posessive_short_name %> Albums<% end %>

<% content_for :canonical_url do %><%=user_url(@user)%><% end %>



<% content_for :meta_tags do %>
    <%= render :partial => "facebook/user_opengraph_tags" %>
<% end %>

<div id="my-albums" class="albums-list">
  <div class="album-section-header">
    <% if current_user == @user %>
        My Albums
    <% else %>
        <%= @user.posessive_short_name%> Albums
    <% end %>
  </div>
  <% if current_user == @user %>
    <a id="inline-new-album-button" class="green-add-button"><span>New Album</span></a>
  <% end %>
</div>

<div id="liked-albums" class="albums-list">
  <div class="album-section-header">
<% if current_user == @user %>
    Liked and Followed Albums
<% else %>
    <%= @user.posessive_short_name%> Liked and Followed Albums
<% end %>
  </div>
</div>


<% if current_user == @user %>
<div id="invited-albums" class="albums-list">
  <div class="album-section-header">
    Invited Albums
  </div>
</div>
<% end %>


<% content_for :page_javascript do %>

    <%= render :partial => "albums/homepage_view_javascript" %>

    <script type="text/javascript">
        (function(){
            var my_albums_path = '<%= @my_albums_path %>';
            // this is null unless you are looking at another users albums
            // from this you can determine which of the albums you like should
            // show in the other users view from your perspective
            var session_user_liked_albums_path = '<%= @session_user_liked_albums_path %>';


            var liked_albums_path ='<%= @liked_albums_path %>';
            var liked_users_albums_path = '<%= @liked_users_albums_path %>';
            var invited_albums_path = '<%= @invited_albums_path %>';

            var session_user_invited_albums_path = '<%= @session_user_invited_albums_path %>';

            var is_current_users_homepage = <%= current_user == @user ? 'true' : 'false' %>;


            var current_user_membership = {
                <% if current_user %>
                    <%=j AlbumACL.get_acls_for_user( current_user.id, AlbumACL::VIEWER_ROLE ).map{ |acl| "#{acl.acl_id}:'#{acl.role.name}'"}.join(',') %>
                <%end%>
            };


            zz.homepage.render(is_current_users_homepage, my_albums_path, session_user_liked_albums_path, liked_albums_path, liked_users_albums_path, invited_albums_path, session_user_invited_albums_path, current_user_membership);
        })();
            
    </script>
<% end %>
