<% content_for :page_title do %><%= @user.posessive_short_name %> Albums<% end %>

<% content_for :canonical_url do %><%=user_url(@user)%><% end %>



<% content_for :meta_tags do %>
    <%= render :partial => "facebook/user_opengraph_tags" %>
<% end %>

<div id="view-buttons">
  
<div id="filter-buttons">
  View
  <a id="filter-all-button" class="gray-button"><span>All</span></a>
  <a id="filter-my-button" class="gray-button"><span>My</span></a>
  <% if current_user == @user %>
      <a id="filter-invited-button" class="gray-button"><span>Invited</span></a>
  <% end %>
  <a id="filter-liked-button" class="gray-button"><span>Like</span></a>
  <a id="filter-following-button" class="gray-button"><span>Following</span></a>
</div>

<div id="sort-buttons">
  Sort
  <a id="sort-date-button" class="gray-button"><span>Date</span></a>
  <a id="sort-recent-button" class="gray-button"><span>Most Recent First</span></a>
  <a id="sort-name-button" class="gray-button"><span>Sort by Name</span></a>
</div>
</div>

<div id="albums" class="albums-list">
  <div id="albums-title" class="album-section-header"></div>
</div>


<% content_for :page_javascript do %>

    <%= render :partial => "albums/homepage_view_javascript" %>

    <script type="text/javascript">
        (function(){
            var my_albums_path = '<%= @my_albums_path %>';
            // this is null unless you are looking at another users albums
            // from this you can determine which of the albums you like should
            // show in the other users view from your perspective
            var session_user_liked_albums_path = '<%= @session_user_liked_albums_path %>';
            var liked_albums_path ='<%= @liked_albums_path %>';
            var liked_users_albums_path = '<%= @liked_users_albums_path %>';
            var invited_albums_path = '<%= @invited_albums_path %>';
            var session_user_invited_albums_path = '<%= @session_user_invited_albums_path %>';
            var is_current_users_homepage = <%= current_user == @user ? 'true' : 'false' %>;
            var current_user_membership = {
                <% if current_user %>
                    <%=j AlbumACL.get_acls_for_user( current_user.id, AlbumACL::VIEWER_ROLE ).map{ |acl| "#{acl.acl_id}:'#{acl.role.name}'"}.join(',') %>
                <%end%>
            };
            var all_albums_title       = '<%=escape_javascript (current_user == @user? 'All Albums' : "All of #{@user.posessive_short_name} Albums") %>';
            var my_albums_title        = '<%=escape_javascript (current_user == @user? 'My Albums' : "#{@user.posessive_short_name} Albums") %>';
            var invited_albums_title   = '<%=escape_javascript (current_user == @user? 'Invited Albums' : "") %>';
            var liked_albums_title     = '<%=escape_javascript (current_user == @user? 'Liked Albums' : "#{@user.posessive_short_name} Liked Albums") %>';
            var following_albums_title = '<%=escape_javascript (current_user == @user? 'Followed Albums' : "#{@user.posessive_short_name} Followed Albums") %>';

            zz.homepage.init( is_current_users_homepage,
                                my_albums_path,
                                session_user_liked_albums_path,
                                liked_albums_path,
                                liked_users_albums_path,
                                invited_albums_path,
                                session_user_invited_albums_path,
                                current_user_membership,
                                all_albums_title,
                                my_albums_title,
                                invited_albums_title,
                                liked_albums_title,
                                following_albums_title
            );
        })();
            
    </script>
<% end %>
