<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="copyright" content="Copyright 2010, ZangZing, Inc. All Rights Reserved." />
    <meta name="DC.title" content="ZangZing - Mock Up" />
    <meta name="title" content="ZangZing - Mock Up" />
<%  # Add in controller or action based meta description
    if @meta_description -%>
    <meta name="description" content="<%= @meta_description %>" />
<%  else -%>
    <meta name="description" content="If simple and fast photo management was a rubicks cube then we'd be Will Smith in that movie he used as a vehicle for his son's career ...we can do it!" />
<%  end
    # Add in controller or action based page title
    if @page_title_override -%>
    <title><%= @page_title_override %></title>
<%  else -%>
    <title>ZangZing - <%= controller.controller_name + ' ' + controller.action_name %></title>
<%  end -%> 
   
    <link rel="stylesheet" href="/stylesheets/lib.css" media="all" />
    <link rel="stylesheet" href="/stylesheets/main.css" media="all" />
    <link rel="stylesheet" href="/stylesheets/jquery.autoSuggest.css" media="all" />

    <!-- TODO: favicon 
    <link rel="shortcut icon" href="images/favicon.png"/> -->
    
    <!-- TODO: iPhone/iPad icon 
    <link rel="apple-touch-icon" href="images/zz_icon.png"/> -->
    
    <!--[if IE 7]>
    <link rel="stylesheet" href="stylesheets/ie7.css" media="all" />
    <![endif]-->
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
    <![endif]-->

<%  # Add in template based style tags by defining this in the template
    if @content_for_page_stylesheet -%>
    <%= @content_for_page_stylesheet %>
<%  end 
    # Add in template based scripts that need to be in the head by defining this in the template
    if @content_for_page_head -%>
    <%= @content_for_page_head %>
<%  end -%>    
  </head>
  <body id="<%= controller.controller_name + '-' + controller.action_name %>" class="<%= controller.controller_name %>">
    
    <div id="container">
    
      <nav class="clearfix">
        <h1><span class="offset"><a href="#">ZangZing</a></span></h1>
        
        <ul id="nav-left" class="clearfix">
          <li id="nav-new-album">New Album</li>
          <li id="nav-find">Find</li>
          <li id="nav-sign-in">Sign In</li>
        </ul>
        
        <img src="/images/btn-play.png" style="display:none;" />
        
        <ul id="nav-right" class="clearfix">
          <li id="nav-buy">Buy</li>
          <li id="nav-like">Like</li>
          <li id="nav-share">Share</li>
          <li id="nav-new-photo">Add Photo</li>
        </ul>
      </nav>

      <header class="clearfix">
<%    if controller.controller_name == 'albums' -%>
      <%= render :partial => 'layouts/album_nav' %>
<%    elsif current_user -%>
      <%= render :partial => 'layouts/user_nav' %>
<%    else -%>
      <%= render :partial => 'layouts/new_nav' %>
<%    end -%>
        
    <article>
    
      <%= yield :layout %>
    
    </article>
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="/javascripts/lib/jquery.validate.js" ></script>
    <script type="text/javascript" src="/javascripts/lib/jquery.autoSuggest.js"></script>    

    <script type="text/javascript" src="/javascripts/lib/jquery.ba-bbq.js"></script>
    <script type="text/javascript" src="/javascripts/lib/jquery.jsonp.js"></script>
    <script type="text/javascript" src="/javascripts/lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="/javascripts/agent.js"></script>
    <script type="text/javascript" src="/javascripts/server.js"></script>

    <script type="text/javascript" src="/javascripts/buddy.js" ></script>
    <script type="text/javascript" src="/javascripts/inits.js" ></script>

    <script type="text/javascript" src="/javascripts/filechooser.js" ></script>
    <script type="text/javascript" src="/javascripts/oauthmanager.js" ></script>
    <script type="text/javascript" src="/javascripts/logging.js"></script>
    <script type="text/javascript" src="/javascripts/imageloader.js"></script>
    <script type="text/javascript" src="/javascripts/sharecontacts.js" ></script>
    
<%  # Add in template based javascript by defining this in the template
    if @content_for_page_javascript -%>
    <%= @content_for_page_javascript %>
<%  end -%>
    <script type="text/javascript">
      /* Vars our js fns need from ruby (calls/conditionals) - NO SECURE DATA
      ----------------------------------------------------------------------- */
<%    if signed_in?  -%>      
      zz.zang.user_id = '<%= current_user.id %>';
<%    end
      # This is where we pass things on to js that we need from ruby.
      # Remember to use the zz.zang namespace. 
-%>    
      /* Fire up our inits starting up the entire waxy ball!!
      ----------------------------------------------------------------------- */
      (function($) {
      
        $(function() {
<%      # This will become dynamic, allowing us to load the right event handlers based on what page we're on. -%>
<%    if current_user && controller.controller_name == 'albums' -%>
        zz.init.template(); 
        zz.init.album();
<%    elsif current_user -%>
        zz.init.template(); 
<%    elsif controller.controller_name == 'albums' -%>
        zz.init.new_user(); 
        zz.init.album();
<%    else -%>
        zz.init.new_user(); 
<%    end -%>
        
          
        });
  
        $(window).bind("load", function() {
<%      # Same here... -%>
          setTimeout('zz.init.loaded()', 64);
        });
        
        $(window).bind("resize", function() {
<%      # And here... -%>
          zz.init.resized(); 
        });
      
      })(jQuery);
    </script>
  </body>
</html>
