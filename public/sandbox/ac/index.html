<html>
<head>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.js"></script>
        <link href="token-input.css" rel="stylesheet" type="text/css" />
        <link href="token-input-facebook.css" rel="stylesheet" type="text/css" />
        <link href="/stylesheets/main.css" rel="stylesheet" type="text/css" />
        <link href="/stylesheets/contacts.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="/javascripts/jquery-lib/jquery.cookie.js"></script>
        <script type="text/javascript" src="/javascripts/jquery-lib/jquery.jsonp.js"></script>
        <script type="text/javascript" src="/javascripts/zz/logging.js"></script>
        <script type="text/javascript" src="/javascripts/zz-oauthmanager/oauthmanager.js"></script>
        <script type="text/javascript" src="/javascripts/zz/agent.js"></script>
        <script type="text/javascript" src="jquery.tokeninput.js"></script>
        <script type="text/javascript" src="contacts.js"></script>

</head>
<body>
<H1>ZZ Autocomplete Tokenizer Testing</H1>

  <script type="text/javascript">
  zz={};
  zz.current_user_id ='249900073725';


$(function(){
      $("#tokenize").tokenInput( zzcontacts.find, {
         hintText: "Type in a search term",
         noResultsText: "No results",
         searchingText: "Searching...",
         searchingErrorText: "Error!",
         searchDelay: 300,
         allowNewValues: true,
         minChars: 1,
         tokenLimit: null,
         tokenLimitText: "Values limit reached!",
         tokenLimitDisplayTime: 1500,
         jsonContainer: null,
         method: "get",
         dataType: "json",
         queryParam: "q",
         onResult: null,
         hideEntered: true,
         prePopulate: {
            data: [{id:1,name:"First"},{id:2,name:"Second"}],
            forceDataFill: true,
            url: "url/to/autocomplete",
            errorText: "Error!",
            method: "post",
            dataType: "json",
            queryParam: "ids",
            onResult: null
         },
         classes: {
            tokenList: "token-input-list-facebook",
            token: "token-input-token-facebook",
            tokenDelete: "token-input-delete-token-facebook",
            selectedToken: "token-input-selected-token-facebook",
            highlightedToken: "token-input-highlighted-token-facebook",
            dropdown: "token-input-dropdown-facebook",
            dropdownItem: "token-input-dropdown-item-facebook",
            dropdownItem2: "token-input-dropdown-item2-facebook",
            selectedDropdownItem: "token-input-selected-dropdown-item-facebook",
            inputToken: "token-input-input-token-facebook"
         }
      });
   });
  </script>

<div  align="left" style="margin: 30px;">
<a data-service="google" class="gray-button contacts-btn" href="javascript:void(0);return false;"><span><div class="off"></div>Google</span></a>
<a data-service="local"  class="gray-button contacts-btn" href="javascript:void(0);return false;"><span><div class="off"></div>Local</span></a>
<a data-service="yahoo"  class="gray-button contacts-btn" href="javascript:void(0);return false;"><span><div class="off"></div>Yahoo</span></a>
<a data-service="mslive" class="gray-button contacts-btn" href="javascript:void(0);return false;"><span><div class="off"></div>MSLive</span></a>
</div>


    <div id="tokenizer">
        <input type="text" id="tokenize" name="blah" />
    </div>

<script type="text/javascript">
    zzcontacts.init( zz.current_user_id, {}, function(){

    $(".contacts-btn").each( function( index, button ){
        var service = $(button).attr('data-service');
        if( zzcontacts.is_service_linked(service)){
            $(button).find('div').removeClass('off sync error').addClass('on');
            $(button).attr( 'title', 'Last import on:'+zzcontacts.data[service].last_import);
        }
        $(button).click( function(e){
            e.preventDefault();
            $(button).attr('disabled', 'disabled');
            $(button).find('div').removeClass('off on error').addClass('sync');
            var onSuccess = function(){
                $(button).find('div').removeClass('off sync error').addClass('on');
                $(button).attr( 'title', 'Last imported a moment ago.');
                $(button).removeAttr('disabled');
            };
            var onError = function(error_src,error_msg){
                $(button).find('div').removeClass('off sync on').addClass('error');
                $(button).attr( 'title', 'There was an error: '+error_msg+'. Please try again later.');
                $(button).removeAttr('disabled');
            };
            zzcontacts.import_contacts(service, onSuccess, onError);
        });
    });
    }, function(){} );
</script>

</body>
</html>

