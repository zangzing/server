
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=100" > <!-- IE8 mode -->

    <script type="text/javascript" src="../../javascripts/lib/cssua.js"></script>

    <style type="text/css" id="page-css">
        html {
            height: 100%;
        }
        body {
            margin: 10px;
            padding: 10px;
            height: 100%;
        }

        .cell{
            width:230px;
            height:230px;
            float:left;
            position: relative;
            border: 1px solid #aaa;
        }

        .stacked-image{
            position:absolute;
            box-shadow: 0px 0px 3px #aaa;
            -webkit-box-shadow: 0px 0px 3px #aaa;
            -moz-box-shadow: 0px 0px 3px #aaa;
            background-color:#fff;
            text-align:center;
        }


        .ua-ie .stacked-image{
            border: 1px solid #ccc;
        }
        .stacked-image img{
            border:5px solid #fff;
        }

        .button-bar{
            position:relative;
            margin-left:auto;
            margin-right:auto;
            bottom:3px;
            display:none;
        }

        .caption{
            position: absolute;
            bottom:10px;
            left:5px;
            right:5px;
            text-align:center
        }


    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" src="../../javascripts/zz/css-transform.js"></script>
    <script type="text/javascript" src="../../javascripts/zz/image-utils.js"></script>
    <script type="text/javascript" src="../../javascripts/zz/jquery-zz.js"></script>
    <script type="text/javascript" src="../../javascripts/jquery-lib/jquery.client.js"></script>
    <script type="text/javascript" src="../../javascripts/lib/underscore.js"></script>
    <script type="text/javascript" src="../../javascripts/lib/cssua.js"></script>
    <script type="text/javascript" >

        var urls = [
            "http://d.1.zz.s3.amazonaws.com/i/255837af-e9d1-4012-8f81-b943328d67d6-t?1300288509",
            "http://d.2.zz.s3.amazonaws.com/i/8a3ae61b-839a-40cb-aa6d-b2376083ee11-t?1300288509",
            "http://d.1.zz.s3.amazonaws.com/i/a8144f9c-e982-41cc-a836-50c3ae3d0acd-t?1300550082",
            "http://d.1.zz.s3.amazonaws.com/i/255837af-e9d1-4012-8f81-b943328d67d6-t?1300288509",
            "http://d.2.zz.s3.amazonaws.com/i/8a3ae61b-839a-40cb-aa6d-b2376083ee11-t?1300288509",
            "http://d.1.zz.s3.amazonaws.com/i/a8144f9c-e982-41cc-a836-50c3ae3d0acd-t?1300550082",
            "http://d.1.zz.s3.amazonaws.com/i/255837af-e9d1-4012-8f81-b943328d67d6-t?1300288509",
            "http://d.2.zz.s3.amazonaws.com/i/8a3ae61b-839a-40cb-aa6d-b2376083ee11-t?1300288509",
            "http://d.1.zz.s3.amazonaws.com/i/a8144f9c-e982-41cc-a836-50c3ae3d0acd-t?1300550082",
            "http://d.1.zz.s3.amazonaws.com/i/255837af-e9d1-4012-8f81-b943328d67d6-t?1300288509",
            "http://d.2.zz.s3.amazonaws.com/i/8a3ae61b-839a-40cb-aa6d-b2376083ee11-t?1300288509",
            "http://d.1.zz.s3.amazonaws.com/i/a8144f9c-e982-41cc-a836-50c3ae3d0acd-t?1300550082",
            "http://d.1.zz.s3.amazonaws.com/i/255837af-e9d1-4012-8f81-b943328d67d6-t?1300288509",
            "http://d.2.zz.s3.amazonaws.com/i/8a3ae61b-839a-40cb-aa6d-b2376083ee11-t?1300288509",
            "http://d.1.zz.s3.amazonaws.com/i/a8144f9c-e982-41cc-a836-50c3ae3d0acd-t?1300550082"
        ];

        $(document).ready(function(){

            _.each(urls, function(url){

                var template = $('<div class="cell">' +
                                '<div class="caption">This is the album name</div>' +
                                '<div class="stacked-image"></div>' +
                                '<div class="stacked-image"></div>' +
                                '<div class="stacked-image">' +
                                    '<img class="cover-photo" src="">' +
                                    '<span class="button-bar">x y z p d q</span>'+
                                '</div>' +
                            '</div>');


                $('body').append(template);
                template.find('.stacked-image:eq(0)').rotate(6);
                template.find('.stacked-image:eq(1)').rotate(3);



                image_utils.pre_load_image(url, function(image){

                    var scaled_size = image_utils.scale(image, {width:180, height:150});

                    template.find('img').attr('src', image.src).css({
                        height:scaled_size.height,
                        width:scaled_size.width
                    });


                    template.find('.stacked-image').css({
                        height:scaled_size.height + 10,
                        width:scaled_size.width + 10
                    }).center_xy({top:0,left:0,height:160,width:230});


                    var cover = template.find('.stacked-image:eq(2)');
                    var cover_height = cover.height();

                    cover.mouseover(function(){
                        cover.css({height: cover_height + 30});
                        cover.find('.button-bar').show();

                    });

                    cover.mouseout(function(){
                        cover.css({height: cover_height});
                        cover.find('.button-bar').hide();
                    });
                }, null);








            });






        });


    </script>

</head>

<body>

</body>

</html>